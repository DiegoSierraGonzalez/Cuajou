<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>¡FELIZ FELIZ NO CUMPLEAÑOS! ó Fröhlichen Nicht-Geburtstag!</title>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- Pantalla de bienvenida tipo splash -->
    <div class="splash" id="splash">
        <h1>🎉 ¡Bienvenida, Cuajo! 🎉</h1>
        <p>Hoy no es tu cumpleaños...<br>¡pero sí una experiencia para celebrarte!</p>
    </div>
    <canvas class="confetti" id="confetti"></canvas>
    <div class="main-content" id="main-content">
        <button class="theme-toggle" id="theme-toggle" title="Cambiar tema">🌙</button>
        <div class="landing">
            <h1>¡FELIZ FELIZ NO CUMPLEAÑOS! ó Fröhlichen Nicht-Geburtstag!</h1>
            <img src="FotoCuajo.jpg" alt="Cuajo" class="main-photo">
        </div>
        <nav>
            <ul>
                <li class="active" onclick="showTab('cumple', this)">🎂 No Cumpleaños</li>
                <li onclick="showTab('momentos', this)">📸 Momentos</li>
                <li onclick="showTab('arbol', this)">🌳 Árbol de Recuerdos</li>
                <li onclick="showTab('minijuego', this)">🎲 Minijuego</li>
                <li onclick="showTab('sorpresa', this)">🎁 INVITACIÓN</li>
                <li onclick="showTab('mensaje', this)">💌 Cartita</li>
            </ul>
        </nav>
        <section id="cumple" class="tab show">
            <strong>Porque cualquier día es perfecto para celebrarte, Cuajo.</strong>
        </section>
        <section id="momentos" class="tab">
            <div id="momentos">
                <div class="momento-recuerdo">
                    <h3>Recuerdo 1</h3>
                    <img src="recuerdo1.jpg" alt="Recuerdo 1" onclick="openLightbox('recuerdo1.jpg')">
                </div>
                <div class="momento-recuerdo">
                    <h3>Recuerdo 2</h3>
                    <img src="recuerdo2.jpg" alt="Recuerdo 2" onclick="openLightbox('recuerdo2.jpg')">
                </div>
            </div>
        </section>
        <section id="arbol" class="tab">
            <h2 class="arbol-titulo">Árbol de Recuerdos</h2>
            <svg id="arbol-svg" viewBox="0 0 400 400" width="320" height="320">
                <!-- Tronco -->
                <rect x="185" y="200" width="30" height="100" fill="#9C6615"/>
                <!-- Ramas principales -->
                <path d="M200 220 Q170 160 100 140" stroke="#9C6615" stroke-width="8" fill="none"/>
                <path d="M200 230 Q210 170 300 130" stroke="#9C6615" stroke-width="8" fill="none"/>
                <!-- Hojas/Recuerdos -->
                <circle class="hoja" id="hoja1" cx="100" cy="140" r="22" fill="#8fd19e" data-recuerdo="¡Aquel picnic en el parque!"><title>Recuerdo especial 1</title></circle>
                <circle class="hoja" id="hoja2" cx="300" cy="130" r="22" fill="#8ecae6" data-recuerdo="Nuestra foto en la feria"><title>Recuerdo especial 2</title></circle>
                <circle class="hoja" id="hoja3" cx="160" cy="110" r="18" fill="#fcbf49" data-recuerdo="El día que reímos hasta llorar"><title>Recuerdo especial 3</title></circle>
                <circle class="hoja" id="hoja4" cx="250" cy="90" r="18" fill="#ffb4a2" data-recuerdo="Un atardecer inolvidable"><title>Recuerdo especial 4</title></circle>
            </svg>
            <div id="recuerdo-popup" class="recuerdo-popup"></div>
            <p class="arbol-tip">Haz clic en cada hoja para descubrir un recuerdo.</p>
        </section>
        <section id="minijuego" class="tab">
            <h2>Rompe los Globos 🎈</h2>
            <button id="startGameBtn">¡Comenzar Juego!</button>
            <div id="gameArea" class="game-area"></div>
            <p id="score" class="score">Puntaje: 0</p>
            <p id="gameMessage" class="game-message"></p>
        </section>
        <section id="sorpresa" class="tab">
            <strong>¡Hola, Cuajo 🏁❤️</strong>
            <br><br>
            Tengo una propuesta digna del paddock de Ferrari: <br>
            Quiero invitarte a ver la nueva película de la Fórmula 1.<br><br>
            Tú serías la escudería Ferrari, impecable, con clase, y siempre robando miradas…
            y yo, bueno… yo sería el piloto que solo quiere una vuelta contigo, aunque sea en la curva más cerrada del calendario 😅🏎️💘<br><br>
            Si te animas, prometo llevar mi pierna buena, comentarios de segundo lugar (porque el primero siempre te lo dejo a ti) y buena compañía en la recta final.
            Más chistes malos como ese.<br><br>
            ¿Aceptas esta pole position a mi lado? ✨
        </section>
        <section id="mensaje" class="tab">
            <strong>Querida Cuajo,</strong>
            <br><br>
            ¡Fröhlichen Nicht-Geburtstag!<br>
            Hoy no es tu cumpleaños, pero eso no me detiene para celebrarte como si lo fuera.<br><br>
            Sé que no estuve contigo ese día especial, y créeme que lo he tenido en el corazón desde entonces.
            A veces la vida nos pone lejos en los momentos que más quisiéramos estar cerca, pero siempre hay formas de compensarlo.<br><br>
            Este “no cumpleaños” es solo una excusa para decirte que me importas muchísimo.
            Que me emociona cada día compartir momentos contigo, y que si pudiera retroceder el tiempo, estaría ahí contigo sin pensarlo dos veces.<br><br>
            Deseo que todo lo bueno que sueñas siga llegando a tu vida, y que nunca te falte un motivo para sonreír.
            Yo, por mi parte, siempre voy a estar buscando nuevas formas de hacerte sentir especial.<br><br>
            Brindo por ti, Cuajo. Por lo que eres, por lo que sueñas y por todo lo bonito que aún nos queda por vivir.<br><br>
            <em>MIT LIEBE, Diego 💖</em>
        </section>
        <div class="spotify-player">
            <iframe style="border-radius:12px"
                src="https://open.spotify.com/embed/track/2BjRhZ2IJmsO1GRquNldsP?utm_source=generator"
                width="300" height="80" frameBorder="0" allowfullscreen=""
                allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture"
                loading="lazy">
            </iframe>
        </div>
        <footer>
            Hecho con 💖 por Diego Sierra · 2025 · Para Cuajo
        </footer>
    </div>
    <!-- Lightbox -->
    <div class="lightbox" id="lightbox" onclick="closeLightbox(event)">
        <button class="lightbox-close" onclick="closeLightbox(event)">&times;</button>
        <img src="" alt="Foto ampliada" id="lightbox-img">
    </div>
    <script>
        // Splash & Main Reveal
        setTimeout(() => {
            document.getElementById('splash').style.display = 'none';
            document.getElementById('main-content').style.opacity = '1';
        }, 2700);

        // Confetti Animation
        window.addEventListener('DOMContentLoaded', () => {
            // Simple confetti animation
            const canvas = document.getElementById('confetti');
            const ctx = canvas.getContext('2d');
            let w = canvas.width = window.innerWidth, h = canvas.height = window.innerHeight;
            let pieces = Array.from({length: 55}, () => ({
                x: Math.random() * w,
                y: Math.random() * -h,
                r: 6 + Math.random() * 12,
                d: Math.random() * 55,
                color: `hsl(${Math.random()*360},90%,60%)`,
                tilt: Math.random() * 10 - 10,
                tiltAngle: 0
            }));

            function drawConfetti() {
                ctx.clearRect(0,0,w,h);
                pieces.forEach(p => {
                    ctx.beginPath();
                    ctx.arc(p.x, p.y, p.r, 0, Math.PI * 2);
                    ctx.fillStyle = p.color;
                    ctx.fill();
                });
            }
            function updateConfetti() {
                pieces.forEach(p => {
                    p.y += (Math.cos(p.d) + 2 + p.r/6)/2;
                    p.x += Math.sin(0.01 * p.d) * 2;
                    if(p.y > h) {
                        p.x = Math.random() * w;
                        p.y = Math.random() * -20;
                    }
                });
            }
            let confettiActive = true;
            function animate() {
                if (confettiActive) {
                    drawConfetti();
                    updateConfetti();
                    requestAnimationFrame(animate);
                }
            }
            animate();
            setTimeout(() => {
                confettiActive = false;
                ctx.clearRect(0,0,w,h);
                canvas.style.display = "none";
            }, 2600);
            window.addEventListener('resize', () => {
                w = canvas.width = window.innerWidth;
                h = canvas.height = window.innerHeight;
            });
        });

        // Tabs
        function showTab(tabId, el) {
            document.querySelectorAll('.tab').forEach(tab => tab.classList.remove('show'));
            document.getElementById(tabId).classList.add('show');
            document.querySelectorAll('nav li').forEach(li => li.classList.remove('active'));
            if(el) el.classList.add('active');
        }
        window.onload = () => showTab('cumple', document.querySelector('nav li'));

        // Lightbox
        function openLightbox(src) {
            document.getElementById('lightbox').classList.add('show');
            document.getElementById('lightbox-img').src = src;
        }
        function closeLightbox(event) {
            if (event.target.classList.contains('lightbox') || event.currentTarget.classList.contains('lightbox-close')) {
                document.getElementById('lightbox').classList.remove('show');
                document.getElementById('lightbox-img').src = '';
            }
        }

        // Theme toggle
        const themeBtn = document.getElementById('theme-toggle');
        themeBtn.onclick = () => {
            document.body.classList.toggle('dark');
            themeBtn.textContent = document.body.classList.contains('dark') ? '☀️' : '🌙';
        };

        // Árbol de recuerdos interactividad
        const hojas = document.querySelectorAll('.hoja');
        const popup = document.getElementById('recuerdo-popup');
        hojas.forEach(hoja => {
            hoja.addEventListener('click', function(e){
                const mensaje = hoja.getAttribute('data-recuerdo');
                popup.textContent = mensaje;
                popup.style.display = 'block';
                popup.style.left = (e.clientX - 50) + 'px';
                popup.style.top = (e.clientY - 70) + 'px';
                setTimeout(() => popup.style.display = 'none', 2600);
            });
        });

        // Minijuego: Rompe los Globos
        const startBtn = document.getElementById('startGameBtn');
        const gameArea = document.getElementById('gameArea');
        const scoreText = document.getElementById('score');
        const gameMessage = document.getElementById('gameMessage');
        let score = 0;
        let gameActive = false;
        let balloons = [];
        let gameTimer;

        function randomColor() {
            const colors = ['#ff477e', '#8ecae6', '#8fd19e', '#fcbf49', '#ffb4a2', '#b8c6db'];
            return colors[Math.floor(Math.random() * colors.length)];
        }
        function createBalloon() {
            const balloon = document.createElement('div');
            balloon.className = 'balloon';
            balloon.style.left = Math.random() * 85 + '%';
            balloon.style.background = randomColor();
            balloon.addEventListener('click', function pop() {
                if (!gameActive) return;
                balloon.classList.add('pop');
                setTimeout(()=>gameArea.removeChild(balloon), 300);
                balloon.removeEventListener('click', pop);
                score++;
                scoreText.textContent = 'Puntaje: ' + score;
                if(score === 10) endGame();
            });
            gameArea.appendChild(balloon);
            balloons.push(balloon);
            setTimeout(()=>{
                if(gameArea.contains(balloon)) gameArea.removeChild(balloon);
            }, 4000);
        }
        function endGame() {
            gameActive = false;
            clearInterval(gameTimer);
            balloons.forEach(b => b.remove());
            balloons = [];
            gameMessage.textContent = '¡Felicidades! Puntaje: ' + score;
            startBtn.style.display = 'inline-block';
        }
        if(startBtn) {
            startBtn.onclick = () => {
                score = 0;
                scoreText.textContent = 'Puntaje: 0';
                gameMessage.textContent = '';
                startBtn.style.display = 'none';
                gameActive = true;
                gameTimer = setInterval(()=>{ if(gameActive) createBalloon(); }, 650);
                setTimeout(()=>{ if(gameActive) endGame(); }, 17000);
            };
        }
    </script>
</body>
</html>
